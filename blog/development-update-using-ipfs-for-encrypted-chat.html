<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Development Update: Using IPFS for Encrypted Chat | OpenBazaar</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Development Update: Using IPFS for Encrypted Chat" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="For the past couple of weeks, OpenBazaar front-end developer Rob Misiorowski has been elbows-deep in the development of the 2.0 chat feature. Here is a look into some of the work he’s been doing:" />
<meta property="og:description" content="For the past couple of weeks, OpenBazaar front-end developer Rob Misiorowski has been elbows-deep in the development of the 2.0 chat feature. Here is a look into some of the work he’s been doing:" />
<link rel="canonical" href="http://127.0.0.1:8080/official_site/blog/development-update-using-ipfs-for-encrypted-chat" />
<meta property="og:url" content="http://127.0.0.1:8080/official_site/blog/development-update-using-ipfs-for-encrypted-chat" />
<meta property="og:site_name" content="OpenBazaar" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-02-17T03:30:00+00:00" />
<script type="application/ld+json">
{"description":"For the past couple of weeks, OpenBazaar front-end developer Rob Misiorowski has been elbows-deep in the development of the 2.0 chat feature. Here is a look into some of the work he’s been doing:","@type":"BlogPosting","url":"http://127.0.0.1:8080/official_site/blog/development-update-using-ipfs-for-encrypted-chat","headline":"Development Update: Using IPFS for Encrypted Chat","dateModified":"2017-02-17T03:30:00+00:00","datePublished":"2017-02-17T03:30:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://127.0.0.1:8080/official_site/blog/development-update-using-ipfs-for-encrypted-chat"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" type="image/png" href="/official_site/favicon.png">
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <link rel="stylesheet" href="/official_site/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://127.0.0.1:8080/official_site/feed.xml" title="OpenBazaar" /></head>
<body><header class="container">
    <nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand" href="/official_site/">
            <img class="openbazaar-logo" alt="openbazaar logo" src="/official_site/assets/home/openbazaar-logo-316bbba492da4a2a44a7ad012f1054fdf0c47c1068d5a949f86bab5ab23a5980.png">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-top" aria-controls="navbar-top"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span> Menu
        </button>
        <div class="collapse navbar-collapse text-center text-lg-left" id="navbar-top">
            
            <ul class="navbar-nav ml-auto"><li class="nav-item ml-md-2 ">
                    <a class="nav-link" href="/official_site/features/">Features
                        
                    </a>
                </li>
                <li class="nav-item ml-md-2 ">
                    <a class="nav-link" href="/official_site/applications/">
                        Applications
                        
                    </a>
                </li>
                <li class="nav-item ml-md-2">
                    <a class="nav-link" href="https://api.openbazaar.org/" target="_blank">API</a>
                </li>
                <li class="nav-item ml-md-2 ">
                    <a class="nav-link" href="/official_site/developers/">
                        Developers
                        
                    </a>
                </li>
                <li class="nav-item ml-md-2 ">
                    <a class="nav-link" href="/official_site/support/">
                        Support
                        
                    </a>
                </li>
                <li class="nav-item ml-md-2 active ">
                    <a class="nav-link" href="/official_site/blog/">
                        Blog
                        
                            <span class="sr-only">(current)</span>
                        
                    </a>
                </li>
                <li class="nav-item ml-md-2">
                    <a href="/official_site/mobile-updates/" class="button small download d-lg-none">Get It for Desktop</a>
                    <a href="/official_site/download/" class="button small download d-none d-lg-inline-flex">DOWNLOAD</a>
                </li>
            </ul>
        </div>
    </nav>
</header><main class="page-content" aria-label="Content">
      <div class="wrapper content">
        <article class="container limited">
    <div class="row">
        <div class="col-12">
            <section class="row pt-0 ">
    
        <div class="col-12 post-heading-image w-100 border-bottom">

        </div>
        <img class="post-openbazaar-logo mx-auto" alt="openbazaar-log0" src="/official_site/assets/blog/openbazaar-logo-ab0938d7ea392ca8dc078be92a0f5be81a3a2ff9550ebd304da2d5fa1e4d8870.png">
    
    <div class="col-12">
        <div class="row text-center mt-4">
            
                <div class="col"></div>
                <div class="col-8">
                    <a href="/official_site/blog/development-update-using-ipfs-for-encrypted-chat">
                        <h3 class="post-title">
                            Development Update: Using IPFS for Encrypted Chat
                        </h3>
                    </a>
                </div>
                <div class="col"></div>
                <div class="col-12 d-flex justify-content-between my-4">
                    <div class="post-emojis">
                        <i class="fab fa-bitcoin post-icon-bitcoin"></i>
                        <img draggable="false" class="emoji medium post-emoji" alt="world emoji" src="https://s.w.org/images/core/emoji/2.4/svg/1f30e.svg">
                        <img draggable="false" class="emoji medium post-emoji" alt="✌" src="https://s.w.org/images/core/emoji/2.4/svg/270c.svg">
                    </div>
                    <a class="post-openbazaar-link" href="/official_site/">OpenBazaar.org</a>
                </div>
            
            <div class="col-12 post-date text-left mb-3">
                Feb 17, 2017
            </div>
            
                <div class="col-12 text-left post-container">
                    <p><em>For the past couple of weeks, <a href="https://blog.openbazaar.org">OpenBazaar</a> front-end developer <strong>Rob Misiorowski</strong> has been elbows-deep in the development of the 2.0 chat feature. Here is a look into some of the work he’s been doing:</em></p>

<p>For the past few weeks I’ve been working on the chat function for version 2.0 which is similar to current 1.0 chat, with a few enhancements on the user’s side. Notably planned is emoji support, typing &amp; message read indicators, and an Unread Messages badge indicating offscreen threads with unread messages.</p>

<p>There are new things going on under the hood, though. To get certain data needed for the Chat UI (handle, avatar hash, location), individual profiles for each user in the UI need to be obtained. These need to be obtained via IPNS, which has been quite slow (calls often take 10+ seconds). The problem with having to make an individual call for each chat head is that the browser has a limit of 6 concurrent HTTP requests to the same domain. So, if we clog that up with bulky time-consuming IPNS calls, the rest of the app will be blocked. For example, if the user tries to navigate to another page, any data required for that page will go to the end of the HTTP request queue and would need to wait until no more than 5 of the chat IPNS calls are left. That could be a while and in the meantime the user would just be looking at a loading spinner which is a great way to ruin the usability of a feature.</p>

<p><em><strong>What is IPNS?</strong><br />
It’s new. Here’s a digest from back-end developer Tyler Smith: IPNS is like DNS for <a href="https://ipfs.io/">IPFS</a> content. It let’s you find IPFS data by a name if you don’t know the hash. The hashes verify integrity so IPFS only needs to find one copy of the content when you search by hash. But when you search by name it has to talk to many nodes and find a quorum of what hash a name points at which makes it much slower.</em></p>

<p>So what we decided to do was expose an HTTP endpoint on the server where you could request profiles in bulk. For example, if we need 10 profiles, we could request them in 1 call, instead of 10. Furthermore, the endpoint has an ‘async’ option, which if true would send the profiles back via sockets as they are obtained by the server. Long story short, we’re not clogging up the UI and we still get the profiles as they’re available. Hooray!</p>

<p><strong>Additional thoughts about IPFS/IPNS from Rob:</strong></p>

<p>In our experience, direct IPFS calls have been fairly performant. IPNS calls, on the other hand, have been quite slow. Apparently the bottleneck is that it takes quite a bit of time for the IPFS system to get the mapping of peerId to hash. When we were at <a href="http://www.coindesk.com/events/construct-2017/">Coindesk’s Construct 2017</a> event a couple of weeks ago we brought this up with the IPFS team and they gave us an idea of how we could improve this performance. It basically involves having the server register in a pub / sub system with other nodes so that as soon as a node has its hash available, it publishes it in real time and any subscribed servers could cache that mapping. That way, the expensive lookup wouldn’t have to happen as the UI is trying to get data. We haven’t looked into implementing that yet and it’s unknown how much of an improvement that would give us, but it does sound quite promising!</p>

<h3 id="icymi">ICYMI</h3>

<p><strong>In case you missed it,</strong> here is other notable news from the last couple of weeks:</p>

<p><a href="https://news.bitcoin.com/openbazaar-integrates-tor-platforms-requested-feature">Openbazaar Integrates Tor – The Platform’s Most Requested Feature</a> – <em>news.bitcoin.com</em></p>

<hr />

<p><strong>Are you a developer who wants to get involved in this early stage?</strong><br />
<em>Get the details <a href="https://blog.openbazaar.org/milestone-1-developer-release-for-openbazaar-2-0">here</a>!</em></p>

<p><strong>Want to start RIGHT NOW buying and selling with Bitcoin using version 1.0?</strong><br />
<em><a href="http://openbazaar.org/">Download OpenBazaar now</a> and do the thing!</em></p>

                </div>
            
        </div>
    </div>
</section>
        </div>
    </div>
</article>
<div class="container-fluid mb-5">
    <div class="row">
        <div class="col-12 pb-4">
            <hr class="help-us-separator">
            <div class="container limited">
                <p>
                    <strong>Do you want to help build this with us?</strong>
                </p>
                <p>
                    <a href="/official_site/download/" class="general-link">Download OpenBazaar</a> right now to get buying or selling in minutes or join us on
                    <a class="general-link" href="https://github.com/openbazaar">Github</a> to contribute to the development of this open-source project!
                </p>
                <p>
                    <!-- AddToAny BEGIN -->
                    <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
                        <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
                        <a class="a2a_button_tumblr"></a>
                        <a class="a2a_button_facebook"></a>
                        <a class="a2a_button_twitter"></a>
                    </div>
                    <script async src="https://static.addtoany.com/menu/page.js"></script>
                    <!-- AddToAny END -->
                </p>
            </div>
        </div>
    </div>
    <div class="row recent-updates-wrapper border-bottom border-top">
    <div class="col-12">
        <section class="container">
            <div class="row">
                <div class="col-12 mb-4 emphasis-text">
                    <h3 class="recent-updates-heading">Recent updates</h3>
                </div>
                <div class="col-12">
                    <div class="card-deck text-center">
                        
                            <div class="card p-3 mb-4">
                                <div class="card-body d-flex flex-column justify-content-between">
                                    <a href="/official_site/blog/this-is-a-title">
                                        <h5 class="recent-updates-title">This is a title</h5>
                                    </a>
                                    <div class="recent-updates-body mt-2">
                                        <h2 id="this-is-the-title">This is the title</h2>


                                    </div>

                                    <a href="/official_site/blog/this-is-a-title" class="button small mt-4 mx-auto">read more</a>
                                </div>
                            </div>
                        
                            <div class="card p-3 mb-4">
                                <div class="card-body d-flex flex-column justify-content-between">
                                    <a href="/official_site/blog/gathering-stats-how-to-value-privacy-and-still-get-data-from-a-decentralized-network">
                                        <h5 class="recent-updates-title">Valuing Privacy & still Getting Data from a Decentralized Network</h5>
                                    </a>
                                    <div class="recent-updates-body mt-2">
                                        <p>Facebook knows exactly how many users are on their platform. Amazon knows exactly how many products are sold. Instagram knows exactly how many photos are shared.</p>


                                    </div>

                                    <a href="/official_site/blog/gathering-stats-how-to-value-privacy-and-still-get-data-from-a-decentralized-network" class="button small mt-4 mx-auto">read more</a>
                                </div>
                            </div>
                        
                            <div class="card p-3 mb-4">
                                <div class="card-body d-flex flex-column justify-content-between">
                                    <a href="/official_site/blog/what-do-moderators-&-moderated-payments-do-on-openbazaar">
                                        <h5 class="recent-updates-title">What Do Moderators & Moderated Payments Do on OpenBazaar?</h5>
                                    </a>
                                    <div class="recent-updates-body mt-2">
                                        <p>Decentralizing ecommerce is an important part of the future we believe in. We are working to build a world with greater access to global commerce and more opportunities for people everywhere to build the lives they want. We believe this...
                                    </div>

                                    <a href="/official_site/blog/what-do-moderators-&-moderated-payments-do-on-openbazaar" class="button small mt-4 mx-auto">read more</a>
                                </div>
                            </div>
                        
                            <div class="card p-3 mb-4">
                                <div class="card-body d-flex flex-column justify-content-between">
                                    <a href="/official_site/blog/cryptocurrency-trading-now-available-on-openbazaar">
                                        <h5 class="recent-updates-title">Cryptocurrency Trading Now Available on OpenBazaar</h5>
                                    </a>
                                    <div class="recent-updates-body mt-2">
                                        <p>OpenBazaar <strong>version 2.2.0</strong> was released today. For the full list of new features and improvements in this release, check out the release notes at the end of the post.</p>


                                    </div>

                                    <a href="/official_site/blog/cryptocurrency-trading-now-available-on-openbazaar" class="button small mt-4 mx-auto">read more</a>
                                </div>
                            </div>
                        
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
</div>
      </div>
    </main><div class="container">
    <footer class="row pb-4">
        <div class="col-12 col-md-8">
            <nav class="navbar navbar-expand-sm navbar-light">
                <div class="collapse show navbar-collapse text-center text-sm-left" id="navbar-bottom">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link " href="/official_site/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/official_site/events/">Events</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/official_site/newsletter/">Newsletter</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/official_site/contributors/">Contributors</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/official_site/bitcoin/">Need Bitcoin?</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/official_site/donate/">Donate</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/official_site/privacy/">Privacy</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="col-12 col-md-4 d-flex flex-row justify-content-md-end justify-content-center">
            <a href="https://twitter.com/openbazaar">
                <i class="social-icon ml-2 fab fa-twitter d-flex align-items-center"></i>
            </a>
            <a href="/official_site/slack">
                <i class="social-icon ml-2 fab fa-slack-hash d-flex align-items-center"></i>
            </a>
            <a href="https://www.reddit.com/r/OpenBazaar/">
                <i class="social-icon ml-2 fab fa-reddit-alien d-flex align-items-center"></i>
            </a>
            <a href="https://github.com/openbazaar">
                <i class="social-icon ml-2 fab fa-github d-flex align-items-center"></i>
            </a>
            <a href="mailto:project@openbazaar.org" target="_top">
                <i class="social-icon ml-2 fas fa-envelope d-flex align-items-center"></i>
            </a>
        </div>
    </footer>
</div><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="/official_site/assets/app-9011f493fc09e558e0b2bb00d1785f4117a54fcaae843db425deeb4a18cbb515.js" type="text/javascript"></script>
  </body>

</html>
